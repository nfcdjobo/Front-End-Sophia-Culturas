{"version":3,"file":"static/js/176.34cc0eb4.chunk.js","mappings":"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","sources":["Components/Login/Login.js"],"sourcesContent":["\r\nimport Footer from '../Footer/Footer';\r\nimport Cookies from 'js-cookie';\r\nimport Validateur from '../../Validators/Validateur';\r\nimport api_url from '../../api_url/api_url';\r\nimport logo from '../../assets/img/logos/logo.png';\r\nimport isCookie_user_authorization from '../controlleur/controlleur';\r\n\r\nfunction eventement(event) {\r\n    event.preventDefault();\r\n    const email = event.target.querySelector('#email');\r\n    const password = event.target.querySelector('#password');\r\n    const errorEmail = event.target.querySelector('#error-email');\r\n    const errorPassword = event.target.querySelector('#error-password');\r\n    const tel = event.target.querySelectorAll('div[tel=col-lg-6]');\r\n    const alerter = event.target.querySelector('#alert');\r\n    Validateur.validateurEmail(email.value)\r\n    .then(res=>{\r\n        errorEmail.textContent = \"\";\r\n        errorPassword.textContent = \"\";\r\n        if(res){\r\n            Validateur.validateurPassword(password.value)\r\n            .then(pass => {\r\n                if(pass){\r\n                    const formData = new FormData(event.target);\r\n                    const urlParams = new URLSearchParams(formData);\r\n                    fetch(api_url+'login', {\r\n                        method: 'POST',\r\n                        body: urlParams\r\n                    })\r\n                    .then(res => res.json())\r\n                    .then(succes => {\r\n                        if(succes.msg.includes('succès')){\r\n                            tel.forEach(item => item.hidden = true);\r\n                            alerter.className = \"alert alert-success text-center\";\r\n                            if(succes.msg.includes('succès')){\r\n                                alerter.textContent = succes.msg;\r\n                                const aaUser = {\r\n                                    token: succes.token,\r\n                                    user: succes.user,\r\n                                    domaine: succes.domaine\r\n                                }\r\n                                Cookies.set('user_sophia_culturas', JSON.stringify(aaUser), {expires: 1, path: '/'});\r\n                                const intervalle = setInterval(() => {\r\n                                    window.location.href = '/profile';\r\n                                }, 1500);\r\n                            }else{\r\n                                alerter.className = \"alert alert-danger text-center\";\r\n                                alerter.textContent = succes.msg;\r\n                            }\r\n                        }else{\r\n                            alerter.className = \"alert alert-danger text-center\";\r\n                            alerter.textContent = succes.msg;\r\n                        }\r\n                    })\r\n                    .catch(() => {\r\n                        alerter.className = \"alert alert-danger text-center\";\r\n                        alerter.textContent = \"Mot de passe incorret !\";\r\n                    })\r\n                }else{\r\n                    password.focus();\r\n                    errorPassword.textContent = \"Le mot de passe doit être au moins 4 caractère et sans espace !\";\r\n                }\r\n            })\r\n        }else{\r\n            email.focus();\r\n            errorEmail.textContent = \"Adresse email invalide !\";\r\n        }\r\n    })\r\n}\r\n\r\nfunction Login(params) {\r\n    if(isCookie_user_authorization){\r\n        window.location.href = \"/profile#!\"\r\n    }else{\r\n        return (\r\n            <div>\r\n                <section className=\"page-section align-items-stretch mb-5\" id=\"contact\">\r\n                    <div className=\"container\">\r\n                        <div className=\"text-center\">\r\n                            <a href=\"/\"><img src={logo} className=\"\" alt=\"logo\" title=\"Logo Sophia-Culturas\" style={{ width: 250+'px' }}></img></a>\r\n                            <h2 className=\"section-heading\">Authentification</h2>\r\n                            <h3 className=\"section-subheading text-muted\">Connectez vous à <a href=\"#\">Sophia-Culturas</a></h3>\r\n                        </div>\r\n                        \r\n                        <form id=\"formulaire\" data-sb-form-api-token=\"API_TOKEN\" onSubmit= { eventement }>\r\n                            <div className=\"row \">\r\n                                <div className=\"col-lg-6\" tel=\"col-lg-6\">\r\n                                    <code id=\"error-email\" style={{ color: 'red' }}></code>\r\n                                    <div className=\"col-lg-12 input-group mb-3\">\r\n                                        <label htmlFor=\"email\" className=\"input-group-text\" id=\"basic-addon1\">Adresse email</label>\r\n                                        <input type=\"text\" name=\"email\" className=\"form-control\" placeholder=\"Adresse email\" aria-label=\"email\" id=\"email\" aria-describedby=\"basic-addon1\" required/>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"col-lg-6\" tel=\"col-lg-6\">\r\n                                    <code id=\"error-password\" style={{ color: 'red' }}></code>\r\n                                    <div className=\"col-lg-12 input-group mb-3\">\r\n                                        <label htmlFor=\"password\" className=\"input-group-text\" id=\"basic-addon1\">Mot de passe</label>\r\n                                        <input type=\"password\" name=\"password\" className=\"form-control\" placeholder=\"Mot de passe\" aria-label=\"password\" id=\"password\" aria-describedby=\"basic-addon1\" required/>\r\n                                    </div>\r\n                                \r\n                                </div>\r\n                                \r\n                            </div>\r\n\r\n                                \r\n                            <div className=\"d-grid gap-2 col-6 mx-auto\" tel=\"col-lg-6\">\r\n                                <div className=\"text-center\" tel=\"col-lg-6\"><button className=\"btn btn-outline-warning\" id=\"submit\" type=\"submit\">Connexion</button></div>\r\n                            </div>\r\n                            <hr/>\r\n                            <div role=\"alert\" id=\"alert\"></div>\r\n\r\n                            <div className=\"row\" id=\"login-reset\" tel=\"col-lg-6\">\r\n                                <div className=\"form-group col-lg-6\">\r\n                                    <div className=\"text-start\"style={{ color: \"white\" }}> Je n'ai pas de compte ? <a href=\"/register\"> M'inscrire ici</a></div>\r\n                                </div>\r\n                                <div className=\"form-group col-lg-6\">\r\n                                    <div className=\"text-end\"style={{ color: \"white\" }}> <a href=\"/reset\"> Mot de passe oublié ?</a></div>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </section>\r\n                <Footer />\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Login;"],"names":["eventement","event","preventDefault","email","target","querySelector","password","errorEmail","errorPassword","tel","querySelectorAll","alerter","Validateur","validateurEmail","value","then","res","textContent","validateurPassword","pass","formData","FormData","urlParams","URLSearchParams","fetch","api_url","method","body","json","succes","msg","includes","forEach","item","hidden","className","aaUser","token","user","domaine","Cookies","set","JSON","stringify","expires","path","setInterval","window","location","href","catch","focus","params","isCookie_user_authorization","_jsxs","children","_jsx","id","src","logo","alt","title","style","width","onSubmit","color","htmlFor","type","name","placeholder","required","role","Footer"],"sourceRoot":""}